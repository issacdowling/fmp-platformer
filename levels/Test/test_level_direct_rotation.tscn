[gd_scene load_steps=31 format=3 uid="uid://b1gv2lqrimfto"]

[ext_resource type="PackedScene" uid="uid://bp88r7c146h7x" path="res://player/player.tscn" id="1_dxe4g"]
[ext_resource type="Material" uid="uid://c75eq6sdj4aru" path="res://materials/dev/dev_floor.tres" id="1_tgr5i"]
[ext_resource type="Material" uid="uid://df5e8kneqopjw" path="res://materials/dev/dev_walkable.tres" id="2_26yhc"]
[ext_resource type="Script" uid="uid://j8pkiicq6w1e" path="res://levels/Test/world_environment_setting_controller.gd" id="2_co74o"]
[ext_resource type="Material" uid="uid://bm1p24h4j8ywx" path="res://materials/dev/dev_too_steep.tres" id="5_wwn3t"]
[ext_resource type="Material" uid="uid://di7ikawiyw206" path="res://materials/dev/dev_walljump.tres" id="7_v51du"]
[ext_resource type="PackedScene" uid="uid://dprc5b4kro2ty" path="res://reusables/moving_platform/moving_platform.tscn" id="7_wv8t6"]
[ext_resource type="PackedScene" uid="uid://dvtbiek41oaqo" path="res://reusables/breaking_platform/breaking_platform.tscn" id="8_8bavy"]
[ext_resource type="Script" uid="uid://diwyfaatdbp2g" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3d.gd" id="8_fk42k"]
[ext_resource type="Script" uid="uid://cog0qfprlph5w" path="res://levels/Test/interact_cube.gd" id="9_0g8ad"]
[ext_resource type="PackedScene" uid="uid://bpobhijshgqig" path="res://reusables/bouncy_platform/bouncy_platform.tscn" id="9_6lkkt"]
[ext_resource type="Script" uid="uid://1pxhwaa6x7nt" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="9_misjv"]
[ext_resource type="Material" uid="uid://bj2rm5pbo8t26" path="res://materials/dev/dev_interactable.tres" id="9_occ2d"]
[ext_resource type="PackedScene" uid="uid://4ltkjln326sy" path="res://reusables/auto_cam_switcher/auto_cam_switcher.tscn" id="14_2u33c"]
[ext_resource type="PackedScene" uid="uid://rsbuvtbn3mr6" path="res://reusables/auto_cam_switcher/boundaries/static_cubic_cam_boundary.tscn" id="15_vfkk7"]
[ext_resource type="PackedScene" uid="uid://gil1nlo1oqy6" path="res://reusables/auto_cam_switcher/boundaries/follow_pos_cubic_cam_boundary.tscn" id="16_4b1us"]
[ext_resource type="Script" uid="uid://dt0t8nd6xkcko" path="res://addons/phantom_camera/scripts/resources/camera_3d_resource.gd" id="16_quii4"]
[ext_resource type="PackedScene" uid="uid://do0qhs5cp2o0o" path="res://reusables/auto_cam_switcher/boundaries/look_pos_cubic_cam_boundary.tscn" id="16_xlt82"]
[ext_resource type="PackedScene" uid="uid://bir6nt44bsoee" path="res://reusables/enemies/turret/turret.tscn" id="19_p7i0g"]
[ext_resource type="PackedScene" uid="uid://c2n46e18biacw" path="res://reusables/collectables/coin.tscn" id="20_4yqp4"]
[ext_resource type="PackedScene" uid="uid://okisigeoecgq" path="res://reusables/enemies/debug/debug_enemy.tscn" id="20_bnadc"]

[sub_resource type="Environment" id="Environment_y05tk"]
background_mode = 1
background_color = Color(0.242765, 7.23165e-05, 0.265251, 1)
sdfgi_enabled = true

[sub_resource type="BoxMesh" id="BoxMesh_xg2vr"]
size = Vector3(40, 0.1, 40)

[sub_resource type="BoxShape3D" id="BoxShape3D_d5g8i"]
size = Vector3(40, 0.1, 40)

[sub_resource type="BoxMesh" id="BoxMesh_p4gp2"]
size = Vector3(3, 1, 5)

[sub_resource type="BoxShape3D" id="BoxShape3D_ncwfv"]
size = Vector3(3, 1, 5)

[sub_resource type="BoxMesh" id="BoxMesh_l5stj"]

[sub_resource type="BoxShape3D" id="BoxShape3D_a4kab"]

[sub_resource type="Resource" id="Resource_61y7a"]
script = ExtResource("9_misjv")
duration = 1.0
transition = 7
ease = 2

[sub_resource type="Resource" id="Resource_srxb6"]
script = ExtResource("16_quii4")
cull_mask = 1048575
h_offset = 0.0
v_offset = 0.0
projection = 0
fov = 138.4
size = 1.0
frustum_offset = Vector2(0, 0)
near = 0.05
far = 4000.0

[node name="TestLevelDirectRotation" type="Node3D"]

[node name="Player" parent="." instance=ExtResource("1_dxe4g")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.168575, 0.847169, -0.503872, -0.466576, 0.381711, 0.797874, 0.868268, 0.369597, 0.330922, 0, 0, 0)
light_energy = 2.163
shadow_enabled = true
shadow_opacity = 0.9

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_y05tk")
script = ExtResource("2_co74o")

[node name="TestLevel" type="Node3D" parent="."]

[node name="Floor" type="StaticBody3D" parent="TestLevel"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)

[node name="Floor2" type="MeshInstance3D" parent="TestLevel/Floor"]
material_override = ExtResource("1_tgr5i")
mesh = SubResource("BoxMesh_xg2vr")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestLevel/Floor"]
shape = SubResource("BoxShape3D_d5g8i")

[node name="Ramps" type="Node3D" parent="TestLevel"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -2)

[node name="WalkableRamp" type="StaticBody3D" parent="TestLevel/Ramps"]
transform = Transform3D(1, 0, 0, 0, 0.80996, -0.586485, 0, 0.586485, 0.80996, -2.3554, 0.95, -2.29874)

[node name="MeshInstance3D" type="MeshInstance3D" parent="TestLevel/Ramps/WalkableRamp"]
material_override = ExtResource("2_26yhc")
mesh = SubResource("BoxMesh_p4gp2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestLevel/Ramps/WalkableRamp"]
shape = SubResource("BoxShape3D_ncwfv")

[node name="UnwalkableRamp" type="StaticBody3D" parent="TestLevel/Ramps"]
transform = Transform3D(1, 0, 0, 0, 0.602721, -0.797952, 0, 0.797952, 0.602721, 2.6446, 0.95, -2.29874)

[node name="MeshInstance3D" type="MeshInstance3D" parent="TestLevel/Ramps/UnwalkableRamp"]
material_override = ExtResource("5_wwn3t")
mesh = SubResource("BoxMesh_p4gp2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestLevel/Ramps/UnwalkableRamp"]
shape = SubResource("BoxShape3D_ncwfv")

[node name="Bridge" type="Node3D" parent="TestLevel"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15, -0.05, 1)

[node name="WalkableRamp" type="StaticBody3D" parent="TestLevel/Bridge"]
transform = Transform3D(1, 0, 0, 0, 0.80996, -0.586485, 0, 0.586485, 0.80996, 0, 1, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="TestLevel/Bridge/WalkableRamp"]
material_override = ExtResource("2_26yhc")
mesh = SubResource("BoxMesh_p4gp2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestLevel/Bridge/WalkableRamp"]
shape = SubResource("BoxShape3D_ncwfv")

[node name="BridgePath" type="StaticBody3D" parent="TestLevel/Bridge"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.36797, -4.23238)

[node name="MeshInstance3D" type="MeshInstance3D" parent="TestLevel/Bridge/BridgePath"]
material_override = ExtResource("2_26yhc")
mesh = SubResource("BoxMesh_p4gp2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestLevel/Bridge/BridgePath"]
shape = SubResource("BoxShape3D_ncwfv")

[node name="MovingPlatform" parent="TestLevel/Bridge" instance=ExtResource("7_wv8t6")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, 0.05, -7.77579)
travel_seconds = 1.5

[node name="StartMarker" parent="TestLevel/Bridge/MovingPlatform" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.701, 0)

[node name="EndMarker" parent="TestLevel/Bridge/MovingPlatform" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.021, 0)

[node name="PlatformHolder" parent="TestLevel/Bridge/MovingPlatform" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.25753, 2.6663, 0)

[node name="WallJumpTest" type="Node3D" parent="TestLevel"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.1448, 4.99189e-07, -10.4553)

[node name="Wall" type="StaticBody3D" parent="TestLevel/WallJumpTest"]
transform = Transform3D(-4.37114e-08, 1, -4.37114e-08, 0, -4.37114e-08, -1, -1, -4.37114e-08, 1.91069e-15, -2.61184, 2.50552, -0.736852)

[node name="MeshInstance3D" type="MeshInstance3D" parent="TestLevel/WallJumpTest/Wall"]
material_override = ExtResource("7_v51du")
mesh = SubResource("BoxMesh_p4gp2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestLevel/WallJumpTest/Wall"]
shape = SubResource("BoxShape3D_ncwfv")

[node name="Wall2" type="StaticBody3D" parent="TestLevel/WallJumpTest"]
transform = Transform3D(-4.37114e-08, 1, -4.37114e-08, 0, -4.37114e-08, -1, -1, -4.37114e-08, 1.91069e-15, 1.45536, 2.50552, -0.736852)

[node name="MeshInstance3D" type="MeshInstance3D" parent="TestLevel/WallJumpTest/Wall2"]
material_override = ExtResource("7_v51du")
mesh = SubResource("BoxMesh_p4gp2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestLevel/WallJumpTest/Wall2"]
shape = SubResource("BoxShape3D_ncwfv")

[node name="Platform" type="StaticBody3D" parent="TestLevel/WallJumpTest"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -0.512734, 4.52509, -3.38903)

[node name="MeshInstance3D" type="MeshInstance3D" parent="TestLevel/WallJumpTest/Platform"]
material_override = ExtResource("2_26yhc")
mesh = SubResource("BoxMesh_p4gp2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestLevel/WallJumpTest/Platform"]
shape = SubResource("BoxShape3D_ncwfv")

[node name="InteractCube" type="StaticBody3D" parent="TestLevel" node_paths=PackedStringArray("player")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.96844, 0.989547, 0.0567908)
script = ExtResource("9_0g8ad")
player = NodePath("../../Player")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TestLevel/InteractCube"]
material_override = ExtResource("9_occ2d")
mesh = SubResource("BoxMesh_l5stj")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestLevel/InteractCube"]
shape = SubResource("BoxShape3D_a4kab")

[node name="TestCam" type="Node3D" parent="TestLevel/InteractCube"]
transform = Transform3D(0.701681, 0, 0.712492, 0, 1, 0, -0.712492, 0, 0.701681, 7.98126, 1.69774, 3.12044)
script = ExtResource("8_fk42k")
tween_resource = SubResource("Resource_61y7a")

[node name="BreakingPlatform" parent="TestLevel" instance=ExtResource("8_8bavy")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.44724, 2.62081, -7.91839)

[node name="BouncyPlatform" parent="TestLevel" instance=ExtResource("9_6lkkt")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.32219, 0.385124, -0.12452)

[node name="AutoCamSwitcher" parent="." instance=ExtResource("14_2u33c")]
unique_name_in_owner = true
debug_bounds_playmode = true

[node name="StaticCubicCamBoundary" parent="." instance=ExtResource("15_vfkk7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.69908, 0, 4.04231)

[node name="Camera" parent="StaticCubicCamBoundary" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9342, 3.8552)
camera_3d_resource = SubResource("Resource_srxb6")

[node name="FollowPosCubicCamBoundary" parent="." instance=ExtResource("16_4b1us")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.15773, 0, 3.8711)
original_priority = 1

[node name="Camera" parent="FollowPosCubicCamBoundary" index="1" node_paths=PackedStringArray("follow_target")]
transform = Transform3D(0.999989, 0, 0, 0, 0.999978, 0, 0, 0, 0.999984, -2.15773, 1.977, 2.12881)
top_level = false
follow_mode = 6
follow_target = NodePath("../../Player")
follow_offset = Vector3(0, 1.477, 0)
follow_distance = 6.0
spring_length = 6.0

[node name="LookPosCubicCamBoundary" parent="." instance=ExtResource("16_xlt82")]

[node name="Camera" parent="LookPosCubicCamBoundary" index="1" node_paths=PackedStringArray("look_at_target")]
look_at_target = NodePath("../../Player")

[node name="Enemies" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.12869, 0, 0)

[node name="Turret" parent="Enemies" instance=ExtResource("19_p7i0g")]

[node name="DebugEnemy" parent="Enemies" instance=ExtResource("20_bnadc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.131909, 1, 2)

[node name="Collectables" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.71639, 0.300694, 0)

[node name="Coin" parent="Collectables" instance=ExtResource("20_4yqp4")]
transform = Transform3D(0.442166, 0, 0.896874, 0, 1, 0, -0.896879, 0, 0.442196, 0, 0, 0)
degress_per_second = 2.5

[node name="Coin2" parent="Collectables" instance=ExtResource("20_4yqp4")]
transform = Transform3D(0.331586, 0, 0.943338, 0, 1, 0, -0.943338, 0, 0.331586, 0, 0, -0.464284)
degress_per_second = 2.5

[node name="Coin3" parent="Collectables" instance=ExtResource("20_4yqp4")]
transform = Transform3D(0.77169, 0, -0.635908, 0, 1, 0, 0.635901, 0, 0.771692, 0, 0, -0.863834)
degress_per_second = 2.5

[node name="Coin4" parent="Collectables" instance=ExtResource("20_4yqp4")]
transform = Transform3D(0.842285, 0, -0.538912, 0, 1, 0, 0.538929, 0, 0.842266, 0, 0, -1.32812)
degress_per_second = 2.5

[node name="Coin5" parent="Collectables" instance=ExtResource("20_4yqp4")]
transform = Transform3D(0.799096, 0, 0.601146, 0, 1, 0, -0.601146, 0, 0.799096, 0, 0, -1.79335)
degress_per_second = 2.5

[node name="Coin6" parent="Collectables" instance=ExtResource("20_4yqp4")]
transform = Transform3D(0.721332, 0, 0.692505, 0, 1, 0, -0.692505, 0, 0.721332, 0, 0, -2.25763)
degress_per_second = 2.5

[node name="Coin7" parent="Collectables" instance=ExtResource("20_4yqp4")]
transform = Transform3D(0.402073, 0, -0.91555, 0, 1, 0, 0.915535, 0, 0.402061, 0, 0, -2.65718)
degress_per_second = 2.5

[node name="Coin8" parent="Collectables" instance=ExtResource("20_4yqp4")]
transform = Transform3D(0.508797, 0, -0.860816, 0, 1, 0, 0.860822, 0, 0.508797, 0, 0, -3.12146)
degress_per_second = 2.5

[editable path="TestLevel/Bridge/MovingPlatform"]
[editable path="TestLevel/BreakingPlatform"]
[editable path="StaticCubicCamBoundary"]
[editable path="FollowPosCubicCamBoundary"]
[editable path="LookPosCubicCamBoundary"]
